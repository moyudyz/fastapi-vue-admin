{
  "upgrade": [
    "CREATE TABLE IF NOT EXISTS \"aerich\" (\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"version\" VARCHAR(255) NOT NULL,\n    \"app\" VARCHAR(20) NOT NULL,\n    \"content\" TEXT NOT NULL\n);\nCREATE TABLE IF NOT EXISTS \"sys_jwt_blacklist\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"jwt\" VARCHAR(255) NOT NULL\n);\nCOMMENT ON COLUMN \"sys_jwt_blacklist\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_jwt_blacklist\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_jwt_blacklist\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_jwt_blacklist\".\"jwt\" IS 'jwt';\nCREATE TABLE IF NOT EXISTS \"sys_api\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"path\" VARCHAR(255) NOT NULL,\n    \"desc\" VARCHAR(255) NOT NULL,\n    \"api_group\" VARCHAR(255) NOT NULL,\n    \"method\" VARCHAR(255) NOT NULL\n);\nCOMMENT ON COLUMN \"sys_api\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_api\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_api\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_api\".\"path\" IS '路径';\nCOMMENT ON COLUMN \"sys_api\".\"desc\" IS '中文描述';\nCOMMENT ON COLUMN \"sys_api\".\"api_group\" IS '组';\nCOMMENT ON COLUMN \"sys_api\".\"method\" IS '方法';\nCREATE TABLE IF NOT EXISTS \"sys_authorty\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"name\" VARCHAR(150) NOT NULL,\n    \"parent_id\" INT REFERENCES \"sys_authorty\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_authorty\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_authorty\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_authorty\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_authorty\".\"name\" IS '角色名';\nCREATE TABLE IF NOT EXISTS \"sys_dict\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"name\" VARCHAR(255) NOT NULL,\n    \"key\" VARCHAR(255) NOT NULL,\n    \"status\" BOOL NOT NULL  DEFAULT True,\n    \"desc\" VARCHAR(255) NOT NULL\n);\nCOMMENT ON COLUMN \"sys_dict\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_dict\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_dict\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_dict\".\"name\" IS '中文名';\nCOMMENT ON COLUMN \"sys_dict\".\"key\" IS '英文名';\nCOMMENT ON COLUMN \"sys_dict\".\"status\" IS '状态';\nCOMMENT ON COLUMN \"sys_dict\".\"desc\" IS '描述';\nCREATE TABLE IF NOT EXISTS \"sys_dict_detail\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"label\" VARCHAR(255) NOT NULL,\n    \"value\" INT NOT NULL,\n    \"status\" BOOL NOT NULL  DEFAULT True,\n    \"sort\" INT NOT NULL  DEFAULT 1,\n    \"sys_dict_id\" INT NOT NULL REFERENCES \"sys_dict\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_dict_detail\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"label\" IS '展示值';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"value\" IS '字典值';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"status\" IS '状态';\nCOMMENT ON COLUMN \"sys_dict_detail\".\"sort\" IS '排序标记';\nCREATE TABLE IF NOT EXISTS \"sys_menu\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"path\" VARCHAR(255) NOT NULL UNIQUE,\n    \"name\" VARCHAR(255) NOT NULL,\n    \"hidden\" BOOL NOT NULL  DEFAULT False,\n    \"component\" VARCHAR(255) NOT NULL,\n    \"sort\" INT NOT NULL,\n    \"title\" VARCHAR(255) NOT NULL,\n    \"icon\" VARCHAR(255) NOT NULL,\n    \"keep_alive\" VARCHAR(255) NOT NULL,\n    \"parent_id\" INT REFERENCES \"sys_menu\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_menu\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_menu\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_menu\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_menu\".\"path\" IS '路由path';\nCOMMENT ON COLUMN \"sys_menu\".\"name\" IS '路由name';\nCOMMENT ON COLUMN \"sys_menu\".\"hidden\" IS '隐藏';\nCOMMENT ON COLUMN \"sys_menu\".\"component\" IS '页面文件路径';\nCOMMENT ON COLUMN \"sys_menu\".\"sort\" IS '排序标记';\nCOMMENT ON COLUMN \"sys_menu\".\"title\" IS '展示名称';\nCOMMENT ON COLUMN \"sys_menu\".\"icon\" IS '图标';\nCOMMENT ON COLUMN \"sys_menu\".\"keep_alive\" IS '是否缓存';\nCREATE TABLE IF NOT EXISTS \"sys_menu_params\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"param_type\" SMALLINT NOT NULL,\n    \"key\" VARCHAR(255) NOT NULL,\n    \"value\" VARCHAR(255) NOT NULL,\n    \"sys_menu_id\" INT NOT NULL REFERENCES \"sys_menu\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_menu_params\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_menu_params\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_menu_params\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_menu_params\".\"param_type\" IS 'params?query';\nCOMMENT ON COLUMN \"sys_menu_params\".\"key\" IS '参数键';\nCOMMENT ON COLUMN \"sys_menu_params\".\"value\" IS '参数值';\nCREATE TABLE IF NOT EXISTS \"sys_user\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"username\" VARCHAR(150) NOT NULL,\n    \"password\" VARCHAR(128),\n    \"nickname\" VARCHAR(150)   DEFAULT '系统用户',\n    \"avatar\" VARCHAR(255)   DEFAULT 'http://qmplusimg.henrongyi.top/head.png',\n    \"sys_authorty_id\" INT NOT NULL REFERENCES \"sys_authorty\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_user\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_user\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_user\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_user\".\"username\" IS '用户名';\nCOMMENT ON COLUMN \"sys_user\".\"password\" IS '密码';\nCOMMENT ON COLUMN \"sys_user\".\"nickname\" IS '昵称';\nCOMMENT ON COLUMN \"sys_user\".\"avatar\" IS '头像';\nCREATE TABLE IF NOT EXISTS \"sys_operation_record\" (\n    \"created\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"deleted\" TIMESTAMPTZ,\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"ip\" VARCHAR(100) NOT NULL,\n    \"method\" VARCHAR(100) NOT NULL,\n    \"path\" VARCHAR(255) NOT NULL,\n    \"status\" INT NOT NULL,\n    \"latency\" INT NOT NULL,\n    \"agent\" VARCHAR(100) NOT NULL,\n    \"error_message\" VARCHAR(255),\n    \"body\" TEXT NOT NULL,\n    \"resp\" TEXT NOT NULL,\n    \"sys_user_id\" INT NOT NULL REFERENCES \"sys_user\" (\"id\") ON DELETE CASCADE\n);\nCOMMENT ON COLUMN \"sys_operation_record\".\"created\" IS '创建时间';\nCOMMENT ON COLUMN \"sys_operation_record\".\"updated\" IS '更新时间';\nCOMMENT ON COLUMN \"sys_operation_record\".\"deleted\" IS '删除时间';\nCOMMENT ON COLUMN \"sys_operation_record\".\"ip\" IS '请求IP';\nCOMMENT ON COLUMN \"sys_operation_record\".\"method\" IS '请求方法';\nCOMMENT ON COLUMN \"sys_operation_record\".\"path\" IS '请求路径';\nCOMMENT ON COLUMN \"sys_operation_record\".\"status\" IS '请求状态';\nCOMMENT ON COLUMN \"sys_operation_record\".\"latency\" IS '延迟';\nCOMMENT ON COLUMN \"sys_operation_record\".\"agent\" IS '代理';\nCOMMENT ON COLUMN \"sys_operation_record\".\"error_message\" IS '错误信息';\nCOMMENT ON COLUMN \"sys_operation_record\".\"body\" IS '请求Body';\nCOMMENT ON COLUMN \"sys_operation_record\".\"resp\" IS '响应Body';\nCOMMENT ON COLUMN \"sys_operation_record\".\"sys_user_id\" IS '用户';\nCREATE TABLE IF NOT EXISTS \"sys_authorty_menu\" (\n    \"sys_authorty_id\" INT NOT NULL REFERENCES \"sys_authorty\" (\"id\") ON DELETE CASCADE,\n    \"sysmenu_id\" INT NOT NULL REFERENCES \"sys_menu\" (\"id\") ON DELETE CASCADE\n);"
  ]
}