{
  "upgrade": [
    "CREATE TABLE IF NOT EXISTS `aerich` (\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `version` VARCHAR(255) NOT NULL,\n    `app` VARCHAR(20) NOT NULL,\n    `content` LONGTEXT NOT NULL\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_jwt_blacklist` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `jwt` LONGTEXT NOT NULL  COMMENT 'jwt'\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_api` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `path` VARCHAR(255) NOT NULL  COMMENT '路径',\n    `desc` VARCHAR(255) NOT NULL  COMMENT '中文描述',\n    `api_group` VARCHAR(255) NOT NULL  COMMENT '组',\n    `method` VARCHAR(255) NOT NULL  COMMENT '方法'\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_authority` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `name` VARCHAR(150) NOT NULL  COMMENT '角色名',\n    `parent_id` INT,\n    CONSTRAINT `fk_sys_auth_sys_auth_a36ecdc7` FOREIGN KEY (`parent_id`) REFERENCES `sys_authority` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_dict` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `name` VARCHAR(255) NOT NULL  COMMENT '中文名',\n    `key` VARCHAR(255) NOT NULL  COMMENT '英文名',\n    `status` BOOL NOT NULL  COMMENT '状态' DEFAULT 1,\n    `desc` VARCHAR(255) NOT NULL  COMMENT '描述'\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_dict_detail` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `label` VARCHAR(255) NOT NULL  COMMENT '展示值',\n    `value` INT NOT NULL  COMMENT '字典值',\n    `status` BOOL NOT NULL  COMMENT '状态' DEFAULT 1,\n    `sort` INT NOT NULL  COMMENT '排序标记' DEFAULT 1,\n    `sys_dict_id` INT NOT NULL,\n    CONSTRAINT `fk_sys_dict_sys_dict_65e8eab9` FOREIGN KEY (`sys_dict_id`) REFERENCES `sys_dict` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_menu` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `path` VARCHAR(255) NOT NULL UNIQUE COMMENT '路由path',\n    `name` VARCHAR(255) NOT NULL  COMMENT '路由name',\n    `hidden` BOOL NOT NULL  COMMENT '隐藏' DEFAULT 0,\n    `component` VARCHAR(255) NOT NULL  COMMENT '页面文件路径',\n    `sort` INT NOT NULL  COMMENT '排序标记',\n    `title` VARCHAR(255) NOT NULL  COMMENT '展示名称',\n    `icon` VARCHAR(255) NOT NULL  COMMENT '图标',\n    `keep_alive` BOOL NOT NULL  COMMENT '是否缓存' DEFAULT 0,\n    `parent_id` INT,\n    CONSTRAINT `fk_sys_menu_sys_menu_60e1b31c` FOREIGN KEY (`parent_id`) REFERENCES `sys_menu` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_menu_params` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `param_type` SMALLINT NOT NULL  COMMENT 'params?query',\n    `key` VARCHAR(255) NOT NULL  COMMENT '参数键',\n    `value` VARCHAR(255) NOT NULL  COMMENT '参数值',\n    `sys_menu_id` INT NOT NULL,\n    CONSTRAINT `fk_sys_menu_sys_menu_c9202de0` FOREIGN KEY (`sys_menu_id`) REFERENCES `sys_menu` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_user` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `username` VARCHAR(150) NOT NULL  COMMENT '用户名',\n    `password` VARCHAR(128)   COMMENT '密码',\n    `nickname` VARCHAR(150)   COMMENT '昵称' DEFAULT '系统用户',\n    `avatar` VARCHAR(255)   COMMENT '头像' DEFAULT 'http://qmplusimg.henrongyi.top/head.png',\n    `sys_authority_id` INT NOT NULL,\n    CONSTRAINT `fk_sys_user_sys_auth_c8797c2c` FOREIGN KEY (`sys_authority_id`) REFERENCES `sys_authority` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_operation_record` (\n    `created` DATETIME(6)   COMMENT '创建时间' DEFAULT CURRENT_TIMESTAMP(6),\n    `updated` DATETIME(6)   COMMENT '更新时间' DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),\n    `deleted` DATETIME(6)   COMMENT '删除时间',\n    `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `ip` VARCHAR(100) NOT NULL  COMMENT '请求IP',\n    `method` VARCHAR(100) NOT NULL  COMMENT '请求方法',\n    `path` VARCHAR(255) NOT NULL  COMMENT '请求路径',\n    `status` INT NOT NULL  COMMENT '请求状态',\n    `latency` INT NOT NULL  COMMENT '延迟',\n    `agent` VARCHAR(100) NOT NULL  COMMENT '代理',\n    `error_message` VARCHAR(255)   COMMENT '错误信息',\n    `body` LONGTEXT NOT NULL  COMMENT '请求Body',\n    `resp` LONGTEXT NOT NULL  COMMENT '响应Body',\n    `sys_user_id` INT NOT NULL COMMENT '用户',\n    CONSTRAINT `fk_sys_oper_sys_user_c4c366b8` FOREIGN KEY (`sys_user_id`) REFERENCES `sys_user` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;\nCREATE TABLE IF NOT EXISTS `sys_authority_menu` (\n    `sys_authority_id` INT NOT NULL,\n    `sysmenu_id` INT NOT NULL,\n    FOREIGN KEY (`sys_authority_id`) REFERENCES `sys_authority` (`id`) ON DELETE CASCADE,\n    FOREIGN KEY (`sysmenu_id`) REFERENCES `sys_menu` (`id`) ON DELETE CASCADE\n) CHARACTER SET utf8mb4;"
  ]
}